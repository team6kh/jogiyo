<!DOCTYPE struts PUBLIC
    "-//Apache Software Foundation//DTD Struts Configuration 2.0//EN"
    "http://struts.apache.org/dtds/struts-2.0.dtd">

<struts>
	<package name="team6-struts" extends="struts-default">

		<!-- SqlMapClient 인터셉터... -->
		<interceptors>
			<interceptor name="conDAO" class="common.ConDAOInterceptor"/>
		</interceptors>

		<!-- NEW 비밀번호 체크 액션 -->
		<action name="checkPass" class="common.CheckPasswordAction">
			<interceptor-ref name="params"/>
			<interceptor-ref name="conDAO"/>
			<result name="error">/common/error.jsp</result>
			<result name="success" type="chain">
				<param name="actionName">${modalParam}</param>
			</result>
		</action>		

		<!-- 로그인 폼 -->
		<action name="loginForm" class="common.login.action.LoginAction" method="loginForm">
			<result>/common/login/loginForm.jsp</result>
		</action>

		<!-- 로그인 액션 -->
		<action name="login" class="common.login.action.LoginAction">		
			<interceptor-ref name="params" />				
			<interceptor-ref name="conDAO" />
			<interceptor-ref name="servletConfig" />
			<result name="error">/common/error.jsp</result>
			<result name="success" type="redirect-action">${actionName}</result>
		</action>

		<!-- 로그아웃 액션 -->
		<action name="logout" class="common.logout.action.LogoutAction">
			<interceptor-ref name="servletConfig" />
			<result name="success" type="redirect-action">home</result>
		</action>

		<!-- 회원가입 폼 -->
		<action name="registrationForm" class="common.registration.action.RegistrationFormAction">
			<result name="buyer">/common/registration/regFormBuyer.jsp</result>
			<result name="seller">/common/registration/regFormSeller.jsp</result>
			<result>/common/registration/regFormBuyer.jsp</result>
		</action>

		<!-- 회원가입 액션 : 구매자, 판매자로 chain -->
		<action name="registration" class="common.registration.action.RegistrationAction">
			<result name="buyer" type="chain">regBuyer</result>
			<result name="seller" type="chain">regSeller</result>
			<result name="error">/common/error.jsp</result>
		</action>

		<!-- 구매자 가입 액션 -->
		<action name="regBuyer" class="common.registration.action.RegBuyerAction">
			<interceptor-ref name="chain"/>
			<interceptor-ref name="prepare"/>
			<interceptor-ref name="modelDriven"/>
			<interceptor-ref name="params"/>
			<interceptor-ref name="conDAO"/>
			<result type="redirect-action">home</result>			
		</action>

		<!-- 판매자 가입 액션 -->
		<action name="regSeller" class="common.registration.action.RegSellerAction">
			<interceptor-ref name="chain"/>
			<interceptor-ref name="prepare"/>
			<interceptor-ref name="modelDriven"/>
			<interceptor-ref name="params"/>
			<interceptor-ref name="conDAO"/>
			<result type="redirect-action">home</result>	
		</action>

		<!-- 아이디 중복체크 액션 -->		
		<action name="checkDup" class="common.CheckDuplicateAction">
			<interceptor-ref name="params" />				
			<interceptor-ref name="conDAO" />
			<result>/common/registration/checkDup.jsp</result>
		</action>	


		<!-- 홈 액션 -->
		<action name="home" class="board.home.action.HomeAction">
			<result>/index.jsp</result>
		</action>		


		<!-- RestBoard 액션 -->		
		<!-- 리스트에서 글쓰기 클릭시 -->
		<action name="insertRestForm" class="board.rest.action.InsertRestAction" method="form">
			<interceptor-ref name="conDAO"/>
			<interceptor-ref name="params"/>
			<result>/board/rest/insertRest.jsp</result>
		</action>

		<!-- 글쓰기에서 submit 클릭시 -->
		<action name="insertRest" class="board.rest.action.InsertRestAction">
			<interceptor-ref name="conDAO"/>
			<interceptor-ref name="fileUpload"/>
			<interceptor-ref name="params"/>
			<result type="redirect-action">
				<param name="actionName">listRest</param>
			</result>
		</action>	

		<!-- 리스트 액션 -->
		<action name="listRest" class="board.rest.action.ListRestAction">
			<interceptor-ref name="params"/>
			<interceptor-ref name="conDAO"/>
			<result>/board/rest/listRest.jsp</result>
		</action>

		<!-- 리드 액션 -->
		<action name="readRest" class="board.rest.action.ReadRestAction">
			<interceptor-ref name="params"/>
			<interceptor-ref name="conDAO"/>
			<result>/board/rest/readRest.jsp</result>
		</action>	
		<!-- RestBoard 끝 -->
		
		
		<!-- Review게시판 시작 -->
		<!-- 리뷰 글쓰기 폼 -->
		<action name="insertReviewForm" class="board.review.action.InsertReviewAction"
			method="form">
			<interceptor-ref name="chain" />
			<result>/board/review/listReview.jsp</result>
		</action>

		<!-- 리뷰 글쓰기 등록 -->
		<action name="insertReviewPro" class="board.review.action.InsertReviewAction">
			<interceptor-ref name="conDAO" />
			<interceptor-ref name="prepare" />
			<interceptor-ref name="modelDriven" />
			<interceptor-ref name="fileUpload" />
			<interceptor-ref name="params" />
			<result type="redirect-action">
				<param name="actionName">listReview</param>
			</result>
		</action>

		<!-- 리뷰 글목록 보기 -->
		<action name="listReview" class="board.review.action.ListReviewAction">
			<interceptor-ref name="conDAO" />
			<interceptor-ref name="chain" />
			<interceptor-ref name="params" />
			<result type="chain">
				<param name="actionName">insertReviewForm</param>
			</result>
		</action>

		<!-- 리뷰 글 수정 폼 -->
		<action name="updateReviewForm" class="board.review.action.UpdateReviewAction"
			method="form">
			<interceptor-ref name="conDAO" />
			<interceptor-ref name="params" />
			<result>/board/review/updateReview.jsp</result>
		</action>

		<!-- 리뷰 글 수정 처리 -->
		<action name="updateReviewPro" class="board.review.action.UpdateReviewAction">
			<interceptor-ref name="conDAO" />
			<interceptor-ref name="prepare" />
			<interceptor-ref name="modelDriven" />
			<interceptor-ref name="fileUpload" />
			<interceptor-ref name="params" />
			<result type="chain">
				<param name="actionName">listReview</param>
			</result>
		</action>
		
		<!--  리뷰글 삭제 폼 -->
		<action name="deleteReviewForm" class="board.review.action.DeleteReviewAction" method="form">
		<interceptor-ref name="params"/>
		<result>/board/review/deleteReview.jsp</result>
		</action>

		<!-- 리뷰 글 삭제 처리 -->
		<action name="deleteReviewPro" class="board.review.action.DeleteReviewAction">
			<interceptor-ref name="conDAO" />
			<interceptor-ref name="params" />
			<result type="chain">
				<param name="actionName">listReview</param>
			</result>
		</action>
		<!-- Review게시판 끝 -->


		<!-- QnA -->
		<!-- QnA 리스트 -->
		<action name="listQna" class="board.qna.action.ListQnaAction">
			<interceptor-ref name="params"/>
			<interceptor-ref name="conDAO"/>
			<result>/board/qna/listQna.jsp</result>
		</action>
		<!-- QNA 상세 -->
		<action name="detailQna" class="board.qna.action.ListQnaAction" method="detail">
			<interceptor-ref name="params"/>
			<interceptor-ref name="conDAO"/>
			<result>/board/qna/viewQna.jsp</result>
		</action>
		<!-- QNA 수정화면 이동 -->
		<action name="updateQnaForm" class="board.qna.action.ListQnaAction" method="detail">
			<interceptor-ref name="params"/>
			<interceptor-ref name="conDAO"/>
			<result>/board/qna/insertQna.jsp</result>
		</action>
		<!-- 등록화면 -->
			<action name="insertQnaForm" class="board.qna.action.InsertQnaAction" method="insertForm">
			<result>/board/qna/insertQna.jsp</result>
			</action>
		<!-- Qna 등록 -->
		<action name="insertQna" class="board.qna.action.InsertQnaAction">
			<interceptor-ref name="prepare"/>
			<interceptor-ref name="modelDriven"/>
			<interceptor-ref name="params"/>
			<interceptor-ref name="conDAO"/>
			<result type="redirect-action">
			<param name="actionName">listQna</param>
			</result>
		</action>
		<!-- Qna 수정 -->
		<action name="updateQna" class="board.qna.action.InsertQnaAction" method="update">
			<interceptor-ref name="prepare"/>
			<interceptor-ref name="modelDriven"/>
			<interceptor-ref name="params"/>
			<interceptor-ref name="conDAO"/>
			<result type="redirect-action">
			<param name="actionName">listQna</param>
			</result>
		</action>
		<!-- Qna 삭제 -->
		<action name="deleteQna" class="board.qna.action.InsertQnaAction" method="delete">
			<interceptor-ref name="prepare"/>
			<interceptor-ref name="modelDriven"/>
			<interceptor-ref name="params"/>
			<interceptor-ref name="conDAO"/>
			<result type="redirect-action">
			<param name="actionName">listQna</param>
			</result>
		</action>
		<!-- QnA 끝 -->		


		<!-- 테스트 -->
		<!-- 테스트 페이지 -->
		<action name="pageTest" class="test.action.PageTestAction">
			<result>/test/pageTest.jsp</result>
		</action>

		<!-- 관리자 대시보드 -->
		<action name="dashAdmin" class="dashboard.admin.action.DashAdminAction">
			<interceptor-ref name="params"/>
			<interceptor-ref name="conDAO"/>
			<result>/dashboard/dashAdmin.jsp</result>
		</action>

		<!-- 테스트 게시판 리스트 액션 -->
		<action name="listTest" class="board.test.action.ListTestAction">
			<interceptor-ref name="params"/>
			<interceptor-ref name="conDAO"/>
			<result>/board/test/listTest.jsp</result>
		</action>

		<!-- 테스트 게시판 쓰기 폼 -->
		<action name="insertTestForm" class="board.test.action.InsertTestAction" method="insertForm">
			<result>/board/test/insertTest.jsp</result>
		</action>

		<!-- 테스트 게시판 쓰기 액션 -->
		<action name="insertTest" class="board.test.action.InsertTestAction">
			<interceptor-ref name="prepare"/>
			<interceptor-ref name="modelDriven"/>
			<interceptor-ref name="params"/>
			<interceptor-ref name="conDAO"/>
			<result type="redirect-action">
				<param name="actionName">listTest</param>
			</result>
		</action>

		<!-- 테스트 게시판 읽기 액션 -->
		<action name="readTest" class="board.test.action.ReadTestAction">
			<interceptor-ref name="params"/>
			<interceptor-ref name="conDAO"/>
			<result>/board/test/readTest.jsp</result>
		</action>		

		<!-- 테스트 게시판 수정 폼 -->
		<action name="updateTestForm" class="board.test.action.UpdateTestAction" method="updateForm">
			<interceptor-ref name="params"/>
			<interceptor-ref name="conDAO"/>
			<result>/board/test/updateTest.jsp</result>
		</action>

		<!-- 테스트 게시판 수정 액션 -->
		<action name="updateTest" class="board.test.action.UpdateTestAction">
			<interceptor-ref name="params"/>
			<interceptor-ref name="conDAO"/>
			<result type="chain">
				<param name="actionName">readTest</param>
			</result>
		</action>

		<!--테스트 게시판 삭제 액션. -->
		<action name="deleteTest" class="board.test.action.DeleteTestAction">
			<interceptor-ref name="params"/>
			<interceptor-ref name="conDAO"/>
			<result type="chain">
				<param name="actionName">listTest</param>
			</result>
		</action>
		<!-- 테스트  끝-->

	</package>
</struts>